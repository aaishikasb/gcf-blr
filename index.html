<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <script src="https://cdn.tailwindcss.com"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Digital Swag - GitHub Career Fair Bangalore</title>
  <meta name="description"
    content="Internships are an amazing way to launch your career in tech! With great success in Delhi in March, now join us in Bangalore for fun, Campus Expert-led info sessions for students that will be focused on how to apply and prepare for winning internship experiences, powered by GitHub!" />
  <meta name="application-name" content="Digital Swag - GitHub Career Fair Bangalore" />
  <meta name="author" content="GitHub Career Fair India Team" />
  <meta name="msapplication-tooltip"
    content="Internships are an amazing way to launch your career in tech! With great success in Delhi in March, now join us in Bangalore for fun, Campus Expert-led info sessions for students that will be focused on how to apply and prepare for winning internship experiences, powered by GitHub!" />
  <meta name="og:site_name" content="Digital Swag - GitHub Career Fair Bangalore" />
  <meta name="og:title" content="Digital Swag - GitHub Career Fair Bangalore" />
  <meta name="og:url" content="" />
  <meta name="og:image" content="images/favicon.png" />
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.12.0/css/all.css"
    integrity="sha384-ekOryaXPbeCpWQNxMwSWVvQ0+1VrStoPJq54shlYhR8HzQgig1v5fas6YgOqLoKz" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Josefin+Sans|Nunito:300,400,700&display=swap" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css" />
  <link rel="stylesheet" href="css/style.css" />
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
  <script src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>

  <link rel="shortcut icon" href="./images/favicon.png" />
  <link crossorigin="anonymous" href="https://fonts.googleapis.com/icon?family=Google+Sans:400&display=swap"
    rel="stylesheet" />
</head>

<body>
  <div class="main-container">
    <div class="input-panel">
      <div class="input">
        <img src="./images/logo.png" alt="GitHub Career Fair Bangalore" class="w-full" />
        <p class="font-sans text-[2rem] font-medium my-4 text-white">Hello there! 👋</p>
        <p class="font-sans text-[1.25rem] mb-4 text-white">We can't wait to host you at GitHub
          Career Fair Bangalore and we know that you're just as excited! <br><br> While we curate the best experience
          for you,
          claim your digital swag by uploading a picture of you and flaunt it across your socials! We recommend using a
          picture with a 1:1 ratio for best results!</p>
        <button class="button" onclick="uploadImage()">Select Photo</button>
        <input class="profile-input" type="file" accept="image/*" onchange="upload(event)" hidden />
        <div class="footer">
        <p class="font-sans text-[1.25rem] mb-1 text-white whitespace-normal">Built with 💖, ☕ & 👨‍💻 by
          <b>GitHub
            Career Fair India Team</b>!</p>
        <p class="font-sans text-[1.25rem] mb-4 text-white">Original repository <a href="https://github.com/girlscript/gssoc-participant-badge" target="_blank" rel="noopener noreferrer" class="underline decoration-dotted">here</a>.</p>
      </div>

      </div>
    </div>
    <div class="preview-panel">
      <canvas></canvas>

    </div>
    <div class="register-panel">
      <p class="font-sans text-[2rem] font-medium my-4 text-white">Haven't registered yet? 🤔</p>
      <iframe src="https://lu.ma/embed-checkout/evt-7ozA02mTDxnmuXS" width="100%" height="90%" frameborder="0"
        style="border: 1px solid #bfcbda88; border-radius: 4px;" allowfullscreen="" aria-hidden="false"
        tabindex="0"></iframe>
    </div>
  </div>

  <script>
    const canvas = document.querySelector("canvas");
    const ctx = canvas.getContext("2d");
    let image = "";
    let shape = "original";
    let append = "";
    let who = "attendee";
    var banner;

    const uploadImage = () => {
      document.querySelector("input.profile-input").click();
    };

    const changeShape = (type) => {
      const original = document.querySelector(
        ".select-container .select#original"
      );
      const square = document.querySelector(".select-container .select#square");
      const circle = document.querySelector(".select-container .select#circle");
      shape = type;
      switch (type) {
        case "original": {
          append = "";
          original.setAttribute("selected", "");
          square.removeAttribute("selected");
          circle.removeAttribute("selected");
          break;
        }
        case "square": {
          append = "";
          square.setAttribute("selected", "");
          original.removeAttribute("selected");
          circle.removeAttribute("selected");
          break;
        }
        case "circle": {
          append = "-circle";
          circle.setAttribute("selected", "");
          original.removeAttribute("selected");
          square.removeAttribute("selected");
          break;
        }
      }
      draw(who);
    };

    const upload = (e) => {
      if (e && e.target.files && e.target.files[0]) {
        const reader = new FileReader();
        reader.onload = (event) => {
          const img = new Image();
          img.onload = () => {
            image = img;
            draw(who);
          };
          img.src = event.target.result;
        };
        reader.readAsDataURL(e.target.files[0]);
      }
    };

    const draw = (who) => {
      banner = new Image();
      banner.src = "./" + who + append + ".png";
      banner.onload = () => {
        if (image) {
          switch (shape) {

            default: {
              const size = Math.min(image.width, image.height);
              canvas.width = 500;
              canvas.height = 500;
              const hRatio = canvas.width / image.width;
              const vRatio = canvas.height / image.height;
              const ratio = Math.max(hRatio, vRatio);
              const x = (canvas.width - image.width * ratio) / 2;
              const y = (canvas.height - image.height * ratio) / 2;
              ctx.drawImage(
                image,
                0,
                0,
                image.width,
                image.height,
                x,
                y,
                image.width * ratio,
                image.height * ratio
              );
              break;
            }
          }
        } else {
          ctx.canvas.width = 500;
          ctx.canvas.height = 500;
          ctx.fillStyle = "#ffffff";
          ctx.fillRect(0, 0, canvas.width, canvas.height);
        }

        const height = (banner.height / banner.width) * canvas.width;
        const y = canvas.height - height;
        const fontSize = canvas.width / 17.2;
        const fontY = y + height * 0.7;
        ctx.drawImage(
          banner,
          0,
          0,
          banner.width,
          banner.height,
          0,
          y,
          canvas.width,
          height
        );

        ctx.fillStyle = "#757575";
        ctx.textAlign = "center";
        ctx.textBaseline = "middle";
        ctx.font = `${fontSize}px Google Sans, sans-serif`;
        // ctx.fillText(category, canvas.width / 2, fontY)

        if (shape === "circle") {
          ctx.globalCompositeOperation = "destination-in";
          ctx.beginPath();
          ctx.arc(
            canvas.width / 2,
            canvas.height / 2,
            canvas.height / 2,
            0,
            Math.PI * 2
          );
          ctx.closePath();
          ctx.fill();
        }
      };
    };

    const download = () => {
      const a = document.createElement("a");
      const url = canvas.toDataURL("image/png;base64");
      a.download = "badge.png";
      a.href = url;
      a.click();
    };

    draw(who);
  </script>
</body>

</html>